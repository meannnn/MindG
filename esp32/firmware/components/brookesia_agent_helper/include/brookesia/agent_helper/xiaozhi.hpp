/*
 * SPDX-FileCopyrightText: 2025-2026 Espressif Systems (Shanghai) CO LTD
 *
 * SPDX-License-Identifier: Apache-2.0
 */
#pragma once

#include "brookesia/lib_utils/describe_helpers.hpp"
#include "brookesia/service_helper/base.hpp"
#include "manager.hpp"

namespace esp_brookesia::agent::helper {

class XiaoZhi: public service::helper::Base<XiaoZhi> {
public:
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
////////////////////////// The following are the service specific types and enumerations ///////////////////////////////
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
/////////////////////////// The following are the types required by the Base class /////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
    enum class FunctionId {
        Max,
    };

    enum class EventId {
        ActivationCodeReceived,
        Max,
    };

////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
/////////////////////////// The following are the function parameter types ////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
/////////////////////////// The following are the event parameter types ///////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
    enum class EventActivationCodeReceivedParam {
        Code,
    };

private:
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
/////////////////////////// The following are the function schemas /////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
/////////////////////////// The following are the event schemas /////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
    static service::EventSchema event_schema_activation_code_received()
    {
        return {
            .name = BROOKESIA_DESCRIBE_TO_STR(EventId::ActivationCodeReceived),
            .description = "Activation code received event, will be triggered when a activation code is received",
            .items = {
                {
                    .name = BROOKESIA_DESCRIBE_TO_STR(EventActivationCodeReceivedParam::Code),
                    .description = "The activation code",
                    .type = service::EventItemType::String
                }
            },
        };
    }

public:
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
/////////////////////////// The following are the functions required by the Base class /////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
    static constexpr std::string_view get_name()
    {
        return "AgentXiaoZhi";
    }

    static std::span<const service::FunctionSchema> get_function_schemas()
    {
        static const std::array < service::FunctionSchema, BROOKESIA_DESCRIBE_ENUM_TO_NUM(FunctionId::Max) > FUNCTION_SCHEMAS = {
            {
            }
        };
        return std::span<const service::FunctionSchema>(FUNCTION_SCHEMAS.begin(), FUNCTION_SCHEMAS.end());
    }

    static std::span<const service::EventSchema> get_event_schemas()
    {
        static const std::array < service::EventSchema, BROOKESIA_DESCRIBE_ENUM_TO_NUM(EventId::Max) > EVENT_SCHEMAS = {
            {
                event_schema_activation_code_received(),
            }
        };
        return std::span<const service::EventSchema>(EVENT_SCHEMAS.begin(), EVENT_SCHEMAS.end());
    }
};

////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
/////////////////////////// The following are the describe macros //////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
BROOKESIA_DESCRIBE_ENUM(XiaoZhi::FunctionId, Max);
BROOKESIA_DESCRIBE_ENUM(XiaoZhi::EventId, Max);

} // namespace esp_brookesia::agent::helper
